<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Static mockup of a weekly itinerary planner with events and flights." />
  <meta name="author" content="Ariel Xia" />
  <title>Itinerary Planner — Index</title>
  <link rel="icon" href="favicon.ico" />
  <link rel="stylesheet" href="css/base.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="planner-page">
  <header>
    <img src="img/webpage-brand-logo.png" alt="Tripweaver Icon" class="icon">
    <h1>TripWeaver</h1>
    <nav>
        <ul>
          <li><a href="index.html">Planner</a></li>
          <li><a href="attraction-search.html">Attractions</a></li>
          <li><a href="saved.html">Saved</a></li>
        </ul>
    </nav>
    <button class="signin-button">Sign In</button>
  </header>

  <section id="planner-content">
    <div class="planner-header">
      <h2 class="planner-title">Travel to Paris, France</h2>
      <div class="planner-buttons">
        <button class="share-btn">Share</button>
        <button class="heart-btn">&#9825;</button>
      </div>
    </div>
    <div class="table-container">
      <div class="scrollable-table">
        <table class="itinerary-table">
          <thead>
            <tr>
              <th class="arrow-cell">
                <button class="arrow-btn left-arrow">&#x25C0;</button>
                <button class="arrow-btn right-arrow">&#x25B6;</button>
              </th>
              <th>Day 1</th>
              <th>Day 2</th>
              <th>Day 3</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Morning</td>
            </tr>
            <tr>
              <td>Afternoon</td>
            </tr>
            <tr>
              <td>Evening</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <section id="saved-attractions">
    <h2>Saved Attractions</h2>
    <div class="attractions-container">
      <div class="attraction-card">
        <h3>Louvre Museum</h3>
        <p>Opens Sunday, Monday, Thursday, Saturday 9:00-18:00 and Wednesday, Friday 9:00-21:00</p>
      </div>
      <div class="attraction-card">
        <h3>Eiffel Tower</h3>
        <p>Opens 9:30-23:00 everyday</p>
      </div>
      <div class="attraction-card">
        <h3>Musée d'Orsay</h3>
        <p>Opend Sunday, Tuesday, Wednesday, Friday, Saturday 9:30-18:00 and Thursday 9:30-21:45</p>
      </div>
    </div>
  </section>

  <div class="share-overlay" id="shareOverlay" aria-hidden="true" role="dialog">
    <div class="share-panel" role="document" aria-label="Share Trip Plan">
      <div class="share-head">
        <div class="share-title">Share “Trip Plan”</div>
        <button class="share-close" id="shareClose" aria-label="Close">×</button>
      </div>
      <div class="share-section">
        <div class="share-input-row">
          <input type="email" id="inviteEmail" class="share-input" placeholder="Add people by email..." />
          <select id="inviteRole" class="share-select">
            <option value="editor">Editor</option>
            <option value="viewer">Viewer</option>
          </select>
          <button class="share-add" id="inviteAdd">Add</button>
        </div>
      </div>
      <div class="share-section">
        <div class="share-subtitle">People with access</div>
        <ul class="share-list" id="peopleList"></ul>
      </div>
      <div class="share-foot">
        <button class="share-done" id="shareDone">Done</button>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <p>&copy; 2025 Ariel Xia, Cynthia Jin, Aaron Huang. All rights reserved.</p >
  </footer>

  <script>
    const openBtn = document.querySelector('.share-btn');
    const overlay = document.getElementById('shareOverlay');
    const closeBtn = document.getElementById('shareClose');
    const doneBtn = document.getElementById('shareDone');
    const inviteEmail = document.getElementById('inviteEmail');
    const inviteRole = document.getElementById('inviteRole');
    const inviteAdd = document.getElementById('inviteAdd');
    const peopleList = document.getElementById('peopleList');

    const accessState = {
      people: [
        { email: 'arielx@tripweaver.com', role: 'owner' },
        { email: 'cynthiaj@tripweaver.com', role: 'owner' },
        { email: 'bh62@tripweaver.com', role: 'editor' }
      ]
    };

    function isValidEmail(v) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
    }

    function openShare() {
      overlay.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      inviteEmail.focus();
    }

    function closeShare() {
      overlay.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    function renderPeople() {
      peopleList.innerHTML = '';
      accessState.people.forEach((p, idx) => {
        const li = document.createElement('li');
        li.className = 'share-item';

        const left = document.createElement('div');
        left.className = 'share-item-left';

        const email = document.createElement('div');
        email.className = 'share-item-email';
        email.textContent = p.email;

        const roleSmall = document.createElement('div');
        roleSmall.className = 'share-item-role-small';
        roleSmall.textContent = p.role;

        left.appendChild(email);
        left.appendChild(roleSmall);

        const right = document.createElement('div');
        right.className = 'share-item-right';

        if (p.role === 'owner') {
          const disabled = document.createElement('button');
          disabled.className = 'share-select-disabled';
          disabled.textContent = 'Editor';
          disabled.disabled = true;
          right.appendChild(disabled);
        } else {
          const select = document.createElement('select');
          select.className = 'share-select';
          select.innerHTML = '<option value="editor">Editor</option><option value="viewer">Viewer</option>';
          select.value = p.role === 'editor' ? 'editor' : 'viewer';
          select.addEventListener('change', () => {
            p.role = select.value === 'editor' ? 'editor' : 'viewer';
            roleSmall.textContent = p.role;
          });

          const remove = document.createElement('button');
          remove.className = 'share-remove';
          remove.textContent = 'Remove';
          remove.addEventListener('click', () => {
            accessState.people.splice(idx, 1);
            renderPeople();
          });

          right.appendChild(select);
          right.appendChild(remove);
        }

        li.appendChild(left);
        li.appendChild(right);
        peopleList.appendChild(li);
      });
    }

    function addInvite() {
      const email = inviteEmail.value.trim();
      const role = inviteRole.value === 'viewer' ? 'viewer' : 'editor';
      if (!isValidEmail(email)) return;
      const exists = accessState.people.some(p => p.email.toLowerCase() === email.toLowerCase());
      if (exists) return;
      accessState.people.push({ email, role });
      inviteEmail.value = '';
      inviteRole.value = 'editor';
      renderPeople();
    }

    openBtn.addEventListener('click', openShare);
    closeBtn.addEventListener('click', closeShare);
    doneBtn.addEventListener('click', closeShare);
    overlay.addEventListener('click', e => { if (e.target === overlay) closeShare(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeShare(); if (e.key === 'Enter' && overlay.getAttribute('aria-hidden') === 'false' && document.activeElement === inviteEmail) { addInvite(); }});
    inviteAdd.addEventListener('click', addInvite);

    renderPeople();
  </script>
</body>
</html>
